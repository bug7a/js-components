"use strict";const BottomBarDefaults={selectedIndex:0,left:0,width:"100%",height:100,items:[],onItemClick:function(t,e){},hoverEffect:!0,style:{container:{color:"transparent",gradient:"linear-gradient(to bottom, transparent, whitesmoke)",border:0},background:{gradient:"linear-gradient(to right, #FFC8C1, #A5E5EB)",border:0,round:100},layout:{padding:40,itemSpacing:20,iconGap:6,selectionPadding:14},icon:{width:40,height:40},label:{textColor:"#FE5D49"},selectedBox:{color:"#EAEAE9",round:100,border:1,borderColor:"#FFFFFF"}}},BottomBar=function(t={}){mergeIntoIfMissing(t,BottomBarDefaults);let e=startObject(t);e.color=e.style.container.color,e.border=e.style.container.border,e.elem.style.background=e.style.container.gradient,e.itemObjList=[];const o=function(t,o){o?(t.label.opacity=1,t.icon.i1.opacity=0,t.icon.i2.opacity=1,e.selectedBox.opacity=1,t.icon.clickable=0):(t.label.opacity=0,t.icon.i1.opacity=1,t.icon.i2.opacity=0,t.icon.clickable=1)},i=function(t,o){const i={};i.icon=startBox({width:40,height:40,color:"transparent",position:"absolute"}),e.innerBox.add(that),that.center("top"),that.setMotion("left 0.3s, opacity 0.3s"),that.elem.style.cursor="pointer",that.on("click",(function(){e.selectedIndex=o,e.onItemClick(i,o),e.refresh()})),i.icon.i1=Icon(0,0,{width:e.style.icon.width,height:e.style.icon.height,position:"absolute"}),that.load(t.icon),that.setMotion("opacity 0.3s"),i.icon.i2=Icon(0,0,{width:e.style.icon.width,height:e.style.icon.height,position:"absolute",opacity:0}),that.load(t.icon.replace(".png","s.png")),that.setMotion("opacity 0.3s"),e.hoverEffect&&(i.icon.on("mouseover",(function(){i.icon.i2.opacity=.5})),i.icon.on("mouseout",(function(){e.selectedIndex!=o&&(i.icon.i2.opacity=0)}))),i.badge=Badge({value:0,maxValue:99,dotSize:12,badgeStyle:{color:"#FE5D49"}}),endBox(),i.label=Label({left:12,width:"auto",height:"auto",color:"transparent",text:t.text,textColor:e.style.label.textColor,position:"absolute",opacity:0}),e.innerBox.add(that),that.center("top"),that.top-=2,that.setMotion("left 0.3s, opacity 0.3s"),that.onResize(e.refreshOneTime),i.index=o,i.data=t,e.itemObjList.push(i),e.refreshOneTime()};return e.refreshOneTime=function(){e.refreshTimeout&&clearTimeout(e.refreshTimeout),e.refreshTimeout=setTimeout((function(){e.refresh()}),5)},e.setBadge=function(t,o){e.itemObjList[t].badge.setValue(o)},e.selectNone=function(){e.selectedIndex=-1,e.refreshOneTime()},e.selectByIndex=function(t){e.selectedIndex=t,e.refreshOneTime()},e.refresh=function(){const t=e.style.layout;let i=t.padding;e.itemObjList.forEach(((n,c)=>{if(n.icon.left=i,-1==e.selectedIndex&&(e.selectedBox.opacity=0),c==e.selectedIndex){i+=n.icon.width+t.iconGap,n.label.left=i,i+=n.label.width+t.itemSpacing,o(n,!0),e.selectedBox.opacity=1,e.selectedBox.left=n.icon.left-t.selectionPadding;const c=n.icon.width+t.iconGap+n.label.width;e.selectedBox.width=c+2*t.selectionPadding}else i+=n.icon.width+t.itemSpacing,n.label.left=n.icon.left,o(n,!1)})),i+=t.padding-t.itemSpacing,e.innerBox.width=i,e.innerBox.center()},e.innerBox=startBox({round:e.style.background.round,width:350,height:76,border:e.style.background.border}),that.elem.style.background=e.style.background.gradient,that.setMotion("width 0.3s, left 0.3s"),e.selectedBox=Box(0,0,142,56,e.style.selectedBox),that.opacity=0,that.setMotion("left 0.3s, width 0.3s, opacity 0.3s"),that.center("top"),endBox(),e.items.forEach(((t,e)=>{i(t,e)})),e.onResize((function(){e.innerBox.dontMotion(),e.innerBox.center()})),endObject(e)};