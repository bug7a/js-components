"use strict";const ScrollBar=function(o={}){let r=startBox();r.props({scrollableBox:null,bar_border:0,bar_round:3,bar_borderColor:"rgba(0, 0, 0, 1)",bar_width:4,bar_mouseOverWidth:4,bar_mouseOverColor:"#373836",bar_opacity:.4,bar_mouseOverOpacity:.9,bar_padding:2,bar_color:"#373836",neverHide:1,showDots:1},o);let l=null;const e=function(){r.setTimeoutVar&&clearTimeout(r.setTimeoutVar),r.setTimeoutVar=setTimeout((function(){1==r.mouseMoving?e():0==r.neverHide&&(r.boxScrollBarTop.opacity=0,r.boxScrollBarLeft.opacity=0,r.topRightDot.visible=0,r.bottomLeftDot.visible=0,r.bottomRightDot.visible=0)}),2e3)},t=function(){r.setTimeoutVar&&clearTimeout(r.setTimeoutVar)};r.refreshScroll=function(){r.scrollableBox.containerBox.add(r),r.width=r.scrollableBox.width,r.height=r.scrollableBox.height,r.aline(r.scrollableBox);const o=r.scrollableBox.elem.scrollLeft,l=r.scrollableBox.elem.clientWidth,t=r.scrollableBox.elem.scrollWidth,c=l/t;r.boxScrollBarLeft.left=o*c+2*r.bar_width,r.boxScrollBarLeft.width=l*c-4*r.bar_width,t==l||0==r.scrollableBox.scrollX?0!=r.neverHide&&t!=l||(r.boxScrollBarLeft.visible=0):1==r.scrollableBox.scrollX&&(r.boxScrollBarLeft.visible=1);const i=r.scrollableBox.elem.scrollTop,a=r.scrollableBox.elem.clientHeight,b=r.scrollableBox.elem.scrollHeight,s=a/b;r.boxScrollBarTop.top=i*s+2*r.bar_width,r.boxScrollBarTop.height=a*s-4*r.bar_width,b==a||0==r.scrollableBox.scrollY?0!=r.neverHide&&b!=a||(r.boxScrollBarTop.visible=0):1==r.scrollableBox.scrollY&&(r.boxScrollBarTop.visible=1),r.refreshDotButtons(),e()},r.refreshDotButtons=function(){if(r.showDots){let o=0;0==r.boxScrollBarTop.visible?(o++,r.topRightDot.visible=0):r.topRightDot.visible=1,0==r.boxScrollBarLeft.visible?(o++,r.bottomLeftDot.visible=0):r.bottomLeftDot.visible=1,r.bottomRightDot.visible=o>1?0:1}};const c=function(o,l){r.mouseMoving=1;const t=r.scrollableBox.elem.clientWidth,c=r.scrollableBox.elem.scrollWidth/t;if(0!=r.mouseX&&1==r.boxScrollBarLeft.clicked){const o=l.clientX-r.mouseX;r.scrollableBox.elem.scrollLeft+=o*c}const i=r.scrollableBox.elem.clientHeight,a=r.scrollableBox.elem.scrollHeight/i;if(0!=r.mouseY&&1==r.boxScrollBarTop.clicked){const o=l.clientY-r.mouseY;r.scrollableBox.elem.scrollTop+=o*a}r.mouseX=l.clientX,r.mouseY=l.clientY,e()};r.color="transparent",r.setMotion("opacity 0.2s"),r.boxScrollBarTop=Box({right:r.bar_padding,border:r.bar_border,borderColor:r.bar_borderColor,round:r.bar_round,width:r.bar_width,color:r.bar_color,opacity:r.bar_opacity}),r.boxScrollBarTop.setMotion("width 0.2s, opacity 0.5s"),r.boxScrollBarLeft=Box({bottom:r.bar_padding,border:r.bar_border,borderColor:r.bar_borderColor,round:r.bar_round,height:r.bar_width,color:r.bar_color,opacity:r.bar_opacity}),r.boxScrollBarLeft.setMotion("height 0.2s, opacity 0.5s"),r.topRightDot=Box({right:r.bar_padding,top:2,width:r.bar_width,height:r.bar_width,color:r.bar_color,opacity:r.bar_opacity,round:r.bar_width,visible:0}),r.bottomRightDot=Box({right:r.bar_padding,bottom:2,width:r.bar_width,height:r.bar_width,color:r.bar_color,opacity:r.bar_opacity,round:r.bar_width,visible:0}),r.bottomLeftDot=Box({left:2,bottom:r.bar_padding,width:r.bar_width,height:r.bar_width,color:r.bar_color,opacity:r.bar_opacity,round:r.bar_width,visible:0}),endBox(),r.position="absolute",r.refreshScroll(),r.scrollableBox.onResize(r.refreshScroll),r.scrollableBox.on("scroll",r.refreshScroll),r.boxScrollBarTop.clickable=1,r.boxScrollBarLeft.clickable=1;const i=function(){r.boxScrollBarTop.width=r.bar_width,r.boxScrollBarTop.color=r.bar_color,r.boxScrollBarTop.opacity=r.bar_opacity};r.boxScrollBarTop.on("mouseover",(function(o,l){r.boxScrollBarTop.width=r.bar_mouseOverWidth,r.boxScrollBarTop.color=r.bar_mouseOverColor,r.boxScrollBarTop.opacity=r.bar_mouseOverOpacity,t()})),r.boxScrollBarTop.on("mouseout",(function(o,l){1!=r.boxScrollBarTop.clicked&&(i(),e())}));const a=function(){r.boxScrollBarLeft.height=r.bar_width,r.boxScrollBarLeft.color=r.bar_color,r.boxScrollBarLeft.opacity=r.bar_opacity};r.boxScrollBarLeft.on("mouseover",(function(o,l){r.boxScrollBarLeft.height=r.bar_mouseOverWidth,r.boxScrollBarLeft.color=r.bar_mouseOverColor,r.boxScrollBarLeft.opacity=r.bar_mouseOverOpacity,t()})),r.boxScrollBarLeft.on("mouseout",(function(o,l){1!=r.boxScrollBarLeft.clicked&&(a(),e())})),r.scrollableBox.on("mouseover",(function(o,l){r.boxScrollBarTop.opacity=r.bar_opacity,r.boxScrollBarLeft.opacity=r.bar_opacity,r.refreshDotButtons(),e()})),r.scrollableBox.on("mouseleave",(function(o,l){r.mouseDownForScrolling=0,e()}));const b=function(){r.mouseX=0,r.mouseY=0,l=Box(0,0,"100%","100%",{color:"transparent",clickable:1}),page.add(that),l.on("mousemove",c);const o=function(){r.mouseMoving=0,r.boxScrollBarLeft.clicked=0,r.boxScrollBarTop.clicked=0,e(),i(),a(),l.remove()};l.on("mouseup",(function(r,l){o()})),l.on("mouseleave",(function(r,l){o()}))};r.boxScrollBarTop.on("mousedown",(function(o,l){r.boxScrollBarTop.clicked=1,b()})),r.boxScrollBarLeft.on("mousedown",(function(o,l){r.boxScrollBarLeft.clicked=1,b()})),page.onResize(r.refreshScroll),r.superRemove=r.remove,r.remove=function(){l&&l.remove(),r.boxScrollBarLeft&&r.boxScrollBarLeft.remove(),r.boxScrollBarTop&&r.boxScrollBarTop.remove(),r.scrollableBox.remove_onResize(r.refreshScroll),page.remove_onResize(r.refreshScroll),t(),B&&"function"==typeof B.disconnect&&B.disconnect(),r.superRemove.call(r),r=null};const s=r.scrollableBox.elem;let n=s.scrollHeight;const B=new MutationObserver((o=>{o.forEach((o=>{n!==s.scrollHeight&&(r.refreshScroll(),n=s.scrollHeight)}))}));return B.observe(s,{childList:!0,subtree:!0,characterData:!0}),makeBasicObject(r),r};